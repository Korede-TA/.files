if [ -z "${INSTALL_DIR+x}" ]; then
  if [ -z "${HOME+x}" ]; then
    echo "ERROR: HOME environment variable not defined!"
    exit 1
  fi
  INSTALL_DIR="$HOME/.files"
fi

if which git >/dev/null 2>&1; then
  # If git already installed, clone the repo
  GIT_REMOTE_URL="${GIT_REMOTE_URL:-https://github.com/sds/.files}"
  git clone "$GIT_REMOTE_URL" "$INSTALL_DIR"
else
  # Otherwise download and extract tarball
  mkdir -p "$INSTALL_DIR"
  curl -L https://github.com/sds/.files/tarball/master \
    | tar -xzf - --strip-components 1 -C "$INSTALL_DIR"
fi
